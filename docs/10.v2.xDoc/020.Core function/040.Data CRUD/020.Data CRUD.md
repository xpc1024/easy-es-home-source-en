---
title: Data CRUD
date: 2023-03-18 10:00:00
permalink: /pages/f3ee10/
---
## Mapper CRUD interface

:::tip description
-universal CRUD encapsulation [basesmapper] (https://gitee.com/dromara/Easy-Es/blob/master/easy-es-core/src/main/Java/cn/easy es/core/conditions/interfaces/basesmapper.java) interface, which is easy-.
-Generic T is an arbitrary entity object.
The-insert interface needs to be different from MP. See the insert document below for details.
-the parameter Serializable is any type of primary key. Easy-Es does not recommend using composite primary keys. Each index has its own unique id primary key.
-The object Wrapper is a conditional constructor
-For the `get' and `set' methods in the entity object T, we recommend that you use the [lombok] (https://projectlombok.org/) plug-in to generate the field names. If you use the plug-in that comes with IDEA, some fields named by hump will not get the correct field names.
For example, there is a field name named eName, and the get method generated by Lombok is getEName (), but the get method generated by IDEA is geteName (), so the bottom layer of the framework will report an error when parsing the field name, and MP also has the same problem.
:::

### Insert

```java
//Insert a record, which is inserted into the index corresponding to the current mapper by default.
Integer insert(T entity);
//Insert a record to specify the specific inserted index, and multiple records are separated by commas.
Integer insert(T entity, String... indexNames);

//Insert multiple records in batch.
Integer insertBatch(Collection<T> entityList)
//Multiple records can be inserted in batches to specify the specific inserted index, and multiple records are separated by commas.
Integer insertBatch(Collection<T> entityList, String... indexNames);
```

#### Parameter Description
| Type | Parameter Name | Description |
| --- | --- | --- |
| `T` | entity | Entity object |
| `Collection<T>` | entityList | collection of entity objects |

::: tip pay special attention
-If the entity you passed in at the time of insert has an id and the data corresponding to the id already exists, the actual effect of this insert is to update the data corresponding to the id, and the update is not included in the total number of successful entries returned by the insert interface.
-When the data update logic is triggered by the insert interface as described above, the updated fields and globally configured policies (such as NOT_NULL/NOT_EMPTY) will not take effect. If you want the policies to take effect, you can call the Update interface instead of the insert interface.
-If you need an id value after insertion, you can get it directly from entity, and the usage is the same as that in MP. For batch insertion, you can also get the successfully inserted data id directly from the original object. The above interface returns Integer as the number of successful entries.
:::

### Delete

```java
//Delete by ID
Integer deleteById(Serializable id);
//Specific indexes can be specified according to ID deletion, and multiple indexes are separated by commas.
Integer deleteById(Serializable id, String... indexNames);

//Delete records according to entity conditions.
Integer delete(LambdaEsQueryWrapper<T> wrapper);

//Delete (bulk delete by ID)
Integer deleteBatchIds(Collection<? extends Serializable> idList);
//Delete (batch deletion according to ID) can specify specific indexes, and multiple indexes are separated by commas.
Integer deleteBatchIds(Collection<? extends Serializable> idList, String... indexNames);
```
#### Parameter Description
| Type | Parameter Name | Description |
| --- | --- | --- |
| `Wrapper<T>` | queryWrapper | Entity Wrapper Class QueryWrapper |
| `Serializable` | id | Primary key ID |
| `Collection<? Extends Serializable>` | idList | Primary key ID list |

### Update

```java
//Update according to ID
Integer updateById(T entity);
//Specific indexes can be specified according to ID update, and multiple indexes are separated by commas.
Integer updateById(T entity, String... indexNames);

//Batch update according to ID
Integer updateBatchByIds(Collection<T> entityList);
//Specific indexes can be specified according to ID batch update, and multiple indexes are separated by commas.
Integer updateBatchByIds(Collection<T> entityList, String... indexNames);

//Update records according to dynamic conditions
Integer update(T entity, LambdaEsUpdateWrapper<T> updateWrapper);
```

#### Parameter Description
| Type | Parameter Name | Description |
| --- | --- | --- |
| `T` | entity | Entity object |
| `Wrapper<T>` | updateWrapper | Entity object encapsulation operation class UpdateWrapper |
| `Collection<T>` | entityList | collection of entity objects |

### Select

```java
//Get the total
Long selectCount(LambdaEsQueryWrapper<T> wrapper);
//The total number obtained is distinct. If it is true, the duplicate removal field must be specified in the wrapper.
Long selectCount(Wrapper<T> wrapper, boolean distinct);

//Query by ID
T selectById(Serializable id);
//Specific indexes can be specified according to ID query, and multiple indexes are separated by commas.
T selectById(Serializable id, String... indexNames);
//Query (batch query by ID)
List<T> selectBatchIds(Collection<? extends Serializable> idList);
//Query (batch query based on ID) can specify specific indexes, and multiple indexes are separated by commas.
List<T> selectBatchIds(Collection<? extends Serializable> idList, String... indexNames);
//According to the dynamic query criteria, if there are multiple records in a record, an error will be reported.
T selectOne(LambdaEsQueryWrapper<T> wrapper);
//Query all records according to dynamic query criteria.
List<T> selectList(LambdaEsQueryWrapper<T> wrapper);
```

#### Parameter Description
| Type | Parameter Name | Description |
| --- | --- | --- |
| `Wrapper<T>` | queryWrapper | Entity Wrapper Class QueryWrapper |
| `Serializable` | id | Primary key ID |
| `Collection<? Extends Serializable>` | idList | Primary key ID list |

:::tip
The usage of-CRUD interface is basically the same as MP.
-The Mapper that users need to inherit is BaseMapper, not BaseMapper.
-EE does not provide a Service layer, but sinks some methods of the Service layer in MP directly to the Mapper layer, which will be more convenient for users to use.
:::


 
