---
title: Faq
date: 2022-06-21 11:08:44
permalink: /pages/2bac63/
---
1. What should I do when there are some requirements that the API provided by EE does not support? It doesn't matter, the author has already helped the masters to think of the best solution, please check here: [Hybrid query](hybrid-query.md)

2. During the trial process, an error is reported: java.lang.reflect.UndeclaredThrowableException
````
Caused by: [daily_document] ElasticsearchStatusException[Elasticsearch exception [type=index_not_found_exception, reason=no such index [daily_document]]]
````
If your error message and cause are the same as above, please check whether the index name is configured correctly, check the global configuration, and the annotation configuration. If the configuration is correct, the index may not exist. You can use the es-head visualization tool to check whether the specified index already exists. , if there is no such index, it can be quickly created through the API provided by EE.

3. Dependency conflict<br />Although the EE framework is lightweight enough, and I try to avoid using too many other dependencies during the development process, it is still difficult to guarantee that there is a very small probability that there will be a dependency conflict with the host project. Dependency conflicts can be resolved by removing duplicate dependencies or unifying the version numbers of dependencies. All possible conflicting dependencies of EE are as follows:
````xml
        <dependency>
            <groupId>org.projectlombok</groupId>
            <artifactId>lombok</artifactId>
          <version>1.18.12</version>
        </dependency>
        <dependency>
            <groupId>org.elasticsearch.client</groupId>
            <artifactId>elasticsearch-rest-high-level-client</artifactId>
            <version>7.10.1</version>
        </dependency>
        <dependency>
            <groupId>org.elasticsearch</groupId>
            <artifactId>elasticsearch</artifactId>
            <version>7.10.1</version>
        </dependency>
        <dependency>
            <groupId>com.alibaba</groupId>
            <artifactId>fastjson</artifactId>
            <version>1.2.79</version>
        </dependency>
````

4. Can't find the data using wrapper.eq(xx::getXX, "query content")?
   eq corresponds to the TermQuery() of es, which can only be queried when the index type of the queried field is keyword. If the index type of the queried field is text, then the field will not be queried by eq. You may wish to look at yourself before using it. If you need word segmentation matching, set the index type of the field as text type, and then use wrapper.match(), wrapper.queryString() and other methods to query; if you need exact matching, you can use the index The field type is established as the keyword type, and then use wrapper.eq() to query; if the same field needs to be queried by exact match and by word segmentation, its index type can be created as keyword&text type, and it is regarded as keyword When querying by type, you need to pass in the field name as "field name.keyword". When querying it as a text type, you can directly use the field name. Or you may wish to make this field redundant, add a new field, the value is consistent with the field, one index uses keyword, one uses text type, so that it can be solved perfectly. For es, it supports PB-level data and adds a redundancy. fields, the performance impact is minimal.

5. process index exception, java.util.concurrent.CompletionException: java.lang.ArithmeticException: / by zero
   It is caused by the configuration of the es stand-alone version, not the framework.

6. Error when adding data
   java.lang.reflect.UndeclaredThrowableException: null
   99% of the time, you use a nested object in your entity class, but the annotation on the object is actually specified as @IndexField(fieldType=Object).
   Nested objects must use the syntax of nested objects, refer to the document [nested types] (/pages/05702c/), the remaining 1% cases are caused by the fact that the version of fastjson dependencies actually introduced in your project is too low/high. The demo provided by me is consistent or consistent with the fastjson version that the framework relies on at the bottom.

7. When calling the insert or insertBatch interface, an error is reported the entity id must not be null
   Check whether the global id policy id-type in the configuration file is customize, and whether the idType value in the @IndexId annotation is IdType.CUSTOMIZE. If this value is set, it means that the id is passed in by the user, so the user needs to take the initiative before inserting data. Set a value for the id of that data before inserting.

8. Error java.lang.NoClassDefFoundError...AliasMetadata when project starts
   Specific error content process index exception,java.util.concurrent.CompletionException: java.lang.BootstrapMethodError: java.lang.NoClassDefFoundError: org/elasticsearch/cluster/metadata/AliasMetadata
   If this error message appears, it means that the version of es and Resthighlevelclient jar that you actually depend on in your current project is too low. It is recommended to upgrade to version 7.10+ (recommended 7.14.0, which is consistent with the dependency version used at the bottom of the framework, and has the best compatibility), can be solved.

9. The index name appears in the index with _s0 or _s1 suffix
   Don't worry, this is the only way to fully automatic and smooth migration with zero downtime. The index suffix does not affect the use, and the framework will automatically activate the new index. Regarding the _s0 and _s1 suffixes, it is unavoidable in this mode, because it is necessary to keep the original Index data migration, and two indexes with the same name cannot exist at the same time.
   For the complete principle, please refer to the [Index Processing](/pages/06b5d9/) chapter.

10. The index will be appended with the alias ee_default_alias
    Don't worry, each index can have N index aliases. This alias is mainly used to facilitate the bottom layer of the framework to manage the indexes automatically managed by the framework. It is equivalent to labeling the index. It is an appending mechanism and will not affect your existing Indexing aliases is like your real name is an old man, someone else gave you a nickname called a macho,a bad old man, a handsome guy... It does not affect your real identity as an old man.

:::tip Tips
In the use of the framework, it is inevitable that exceptions will occur due to various reasons. We do not rule out the defects of the framework itself, but most of the functions currently released are relatively stable and have test case coverage and a large number of users have verified the production environment. , Most of the time, users do not use the document and play freely, which leads to some problems. Such users are usually lazy, and when they encounter a big problem, they immediately come to the group to ask, or complain about the framework garbage, and then we help The investigation and solution finally found that the xx place was not used according to the document, but was messing around. We are also very helpless. After all, the energy and time of open source are relatively limited. We want to spend time on the cutting edge, such as collecting real bugs and iterating. Instead of wasting time in these useless places.
Therefore, we still hope that users can read the document more before using it. If you encounter problems, you might as well start with the document and see how the DEMO we provide is written. Break the point to find the reason, look at the source code analysis and analysis, and have gone through these steps , If you still can't solve it, you can ask questions in the Q&A group again. This is the basic quality of a code farmer, and it is of great help to improve your own technical level. If you encounter problems, throw them out, and over time, solve and analyze problems independently The ability of the device will get worse and worse. If things go on like this, if one day you use a certain open source product, and no one answers your questions, what will you do?
:::